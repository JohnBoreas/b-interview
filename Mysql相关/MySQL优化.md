#### mysql 优化

答：sql优化：索引，字段长度，数据库引擎，主键id等等



_1 数据库服务器内核优化

_2 my.cnf配置,搭配压力测试进行调试

_3 sql语句优化

__1 使用缓存优化查询(进行多次相同的查询,结果就会放入缓存中，后续再进行同样的查询，就直接从缓存中提取，不会表中提取)

__2 explain执行计划检测SQL查询

__3 给搜索字段建立索引 where后面的字段建立索引（聚集索引和非聚集索引的查询原理）大数据量的查询不合适

__4 limit 1 (前提该字段没有建立索引,明确只有一行数据的时候。只要找到了对应的一条记录,就不会继续向下扫描了,效率会大大提高)

__5 永久连接 （在一些极端环境中，apache 会发出http请求，创建子进程去请求数据库）

__6 选择正确的数据库引擎 myisam和innodb

innoDB支持事务、外键、数据恢复等，适用于对数据一致性要求高，除增查外删、更新也比较频繁的情况。myISAM插入和读取数据效率高，对数据删、更新较少的情况可以选择

__7 在进行大量的delete、insert会导致锁表(利用limit进行拆分)

__8 数据类型 尽量使用小的

__9 固定字段长度 有利于mysql计算数据的偏移量

varchar(长度） 1~ 65535 字节

内容范围：单字节内容 65535个，内容要保存1~2字节，保存内容的长度使用。

utf-8 字符集 3个字节一个汉字 : 1~20000多汉字

char(长度） 1~ 255 字符。

单字节： 每个字节等于1个字符

汉字： 3个字节等于一个字符

无论单字节内容、汉字 都可以存储1~255 个

char 的运行速度快 ，例如： char(20) ,如果实际存储16个字符，还是分配20个空间

varchar()运行速度稍慢 ，例如varchar(20) 实际存储16个字符，分配16个空间

__10 尽量不要设置null 设置‘ ’

__11 明确固定的字段上使用enum（性别、国家、市）

__12 id 主键每张表都要建立

__13 避免使用select * (查询越多，速度越慢，数据多对网络的传输也会负载过重)

__14 rand() 计算在cpu上面进行

__15 连接两表的时候。join 尽量保持两个字段的类型一致

__16 垂直分割 将表的按列的形式分割成表