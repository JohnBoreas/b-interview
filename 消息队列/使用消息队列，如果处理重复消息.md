#### 使用消息队列，如果处理重复消息？

1）利用数据库的唯一约束实现幂等 

2）为更新的数据设置前置条件（CAS） 

3）记录并检查操作（在发送消息时，给每条消息指定一个全局唯一的 ID，消费时，先根据这个 ID 检查这条消息是否有被消费过，如果没有消费过，才更新数据，然后将消费状态置为已消费。）