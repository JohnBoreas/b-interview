#### 内存溢出的原因有哪些，如何排查线上问题？

1、 java.lang.OutOfMemoryError: .....**.java heap space**.....   堆栈溢出，代码问题的可能性极大

2、 java.lang.OutOfMemoryError: GC over head limit exceeded 系统处于高频的GC状态，而且回收的效果依然不佳的情况，就会开始报这个错误，这种情况一般是产生了很多不可以被释放的对象，有可能是引用使用不当导致，或申请大对象导致，但是java heap space的内存溢出有可能提前不会报这个错误，也就是可能内存就直接不够导致，而不是高频GC.

3、 java.lang.OutOfMemoryError: PermGen space jdk1.7之前才会出现的问题 ，原因是系统的代码非常多或引用的第三方包非常多、或代码中使用了大量的常量、或通过intern注入常量、或者通过动态代码加载等方法，导致常量池的膨胀

4、 java.lang.OutOfMemoryError: Direct buffer memory    直接内存不足，因为jvm垃圾回收不会回收掉直接内存这部分的内存，所以可能原因是直接或间接使用了ByteBuffer中的allocateDirect方法的时候，而没有做clear

5、 java.lang.**StackOverflowError** -     Xss设置的太小了

6、 java.lang.OutOfMemoryError: unable to create new native thread 堆外内存不足，无法为线程分配内存区域

7、 java.lang.OutOfMemoryError: request {} byte for {}out of swap 地址空间不够

8、OutOfMemoryError: **unable to create new native thread**，原因：系统内存耗尽，无法为新线程分配内存；或者是：创建线程数超过了操作系统的限制



内存溢出的原因：

1、 内存泄露导致堆栈内存不断增大，从而引发内存溢出。

2、 大量的jar，class文件加载，装载类的空间不够，溢出

3、 操作大量的对象导致堆内存空间已经用满了，溢出

4、 nio直接操作内存，内存过大导致溢出

解决：

1、 查看程序是否存在内存泄漏的问题

2、 设置参数加大空间

3、 代码中是否存在死循环或循环产生过多重复的对象实体、

4、 查看是否使用了nio直接操作内存。